<!DOCTYPE html>
<html>
  <head> 
    <meta charset="utf-8">
    <title>Run through</title>
    <meta name="description" content="360&deg; Image - A-Frame">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
    <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>
    <script src="https://unpkg.com/aframe-lerp-component/dist/aframe-lerp-component.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="cubemap-static.js"></script>
    <script src="debug-text.js"></script>
    <script src="meta-stuff.js"></script>
    <script src="onhover-disappear.js"></script>
    <script src="hider-material.js"></script>
    <script src="dashboard-item.js"></script>
    <link rel="stylesheet" href="main.css">
  </head>
  <body onload="runVideo()">
    <div id="container">
      <video autoplay="true" id="videoElement"></video>
      <div id="debug-text">Init text</div>
    </div>

    <a-scene
      renderer="antialias: true; colorManagement: true; physicallyCorrectLights: true;"
      debug-custom="visible: true"
      meta-stuff
      vr-mode-ui="enabled: false">
      <a-assets>
        <!--<a-asset-item id="ballModel" src="assets/jini-ball.glb"></a-asset-item>-->
        <a-asset-item id="mainSculpture1" src="assets/glbs/Sculptures.glb"></a-asset-item>
        <a-asset-item id="brassModel" src="assets/glbs/brushedbrass.glb"></a-asset-item>
        <a-asset-item id="nickelModel" src="assets/glbs/brushednickel.glb"></a-asset-item>
        <a-asset-item id="chromeModel" src="assets/glbs/chrome.glb"></a-asset-item>
        <a-asset-item id="glassModel" src="assets/glbs/frostedglass.glb"></a-asset-item>
        <a-asset-item id="matteModel" src="assets/glbs/matteblack.glb"></a-asset-item>
        <a-asset-item id="baseModel" src="assets/glbs/base.glb"></a-asset-item>
        <a-asset-item id="door-set" src="assets/glbs/door_set.glb"></a-asset-item>
        <a-asset-item id="door-solid" src="assets/glbs/door_solid.glb"></a-asset-item>
        <a-asset-item id="configA-item1" src="assets/glbs/26299.glb"></a-asset-item>
        <a-asset-item id="configA-item2" src="assets/glbs/26296.glb"></a-asset-item>
        <a-asset-item id="configA-item3" src="assets/glbs/26284.glb"></a-asset-item>
        <a-asset-item id="configA-item4" src="assets/glbs/26314.glb"></a-asset-item>
        <a-asset-item id="configA-item5" src="assets/glbs/28213.glb"></a-asset-item>
        <a-asset-item id="configA-item6" src="assets/glbs/28214.glb"></a-asset-item>
        <a-asset-item id="configA-item0" src="assets/glbs/CONFIG-A.glb"></a-asset-item>

        <img id="tahoe" src="./assets/hdris/tahoe-Resized.jpg">
        <!--<img id="posx" src="./assets/cubemap/posx.png">-->
        <!--<img id="posy" src="./assets/cubemap/posy.png">-->
        <!--<img id="posz" src="./assets/cubemap/posz.png">-->
        <!--<img id="negx" src="./assets/cubemap/negx.png">-->
        <!--<img id="negy" src="./assets/cubemap/negy.png">-->
        <!--<img id="negz" src="./assets/cubemap/negz.png">-->
        <img id="posx" src="./assets/cubemap/px.png">
        <img id="posy" src="./assets/cubemap/py.png">
        <img id="posz" src="./assets/cubemap/pz.png">
        <img id="negx" src="./assets/cubemap/nx.png">
        <img id="negy" src="./assets/cubemap/ny.png">
        <img id="negz" src="./assets/cubemap/nz.png">
      </a-assets>

      <!-- <a-camera id="camera" position="0 4 8" animation="property: position; delay: 5000; to: 0 4 -2; easing: easeInOutQuad; loop: false; dur: 3000">
        <a-cursor  material="color: black; shader: flat; opacity: 0"></a-cursor>
      </a-camera> -->
      <!-- look-controls="reverseMouseDrag:true; touchEnabled: false" -->
      <a-entity id="cam-parent" position="0 0 0">
        <a-camera id="camera" position="0 4 0"  look-controls="touchEnabled: true" >
          <a-cursor  material="color: black; shader: flat; opacity: 0.2;"></a-cursor>
        </a-camera>
      </a-entity>

      <!-- <a-entity
        rotation="0 180 0"
        scale="5 5 5"
        id="door-placeholder"
        gltf-model="#door-solid"
        material="shader: flat;  color:white">
      </a-entity> -->
      <!-- <a-gltf-model src="#door-solid" rotation="0 180 0" material="shader: flat;  color:white"></a-gltf-model> -->
      <a-entity id="parent" position="0 -3 0">
        <a-plane id="door-placeholder" material="shader: flat;  color:white; opacity: 0.2" width="5" height="10" position="0 5 -15" ></a-plane>
        <a-entity id="all-content" position="0 0 -15">
          <!-- Hider walls -->
          <a-entity id="hider-walls">
            <a-entity id="reverse-wall">
              <a-box id="door-container" onhover-disappear depth="0.4" height="10" width="4" position="0 5 0" material="opacity: 0"></a-box>
              <a-entity
                scale="5 5 5"
                id="doorset"
                gltf-model="#door-set"
                hider-material>
              </a-entity>
              <a-plane id="hider-stage-top" width="50" height="10" position="0 15 0"  hider-material></a-plane>
              <a-plane id="hider-stage-left" width="20" height="10" position="-15 5 0"  hider-material></a-plane>
              <a-plane id="hider-stage-right" width="20" height="10" position="15 5 0"  hider-material></a-plane>
            </a-entity>
            <a-entity id="wall-env">
              <a-plane id="hider-behind" width="50" height="20" rotation="0 180 0" position="0 10 30"  hider-material></a-plane>
              <a-plane id="hider-top" width="50" height="30" rotation="90 0 0" position="0 20 15"  hider-material></a-plane>
              <a-plane id="hider-bottom" width="50" height="30" rotation="-90 0 0" position="0 0 15"  hider-material></a-plane>
              <a-plane id="hider-left" width="30" height="20" rotation="0 90 0" position="-25 10 15"  hider-material></a-plane>
              <a-plane id="hider-right" width="30" height="20" rotation="0 -90 0" position="25 10 15"  hider-material></a-plane>
            </a-entity>
          </a-entity>
          <a-entity light="type: ambient; intensity: 1;"></a-entity>
          <a-entity id="portal-contents" position="0 0 0">
            <a-entity
              id="camFinalPos"
              scale="0 0 0"
              position="0 4 0">
            </a-entity>
            <a-entity
              id="main1"
              scale="0 0 0"
              rotation="0 1 0"
              position="0 0 -10"
              gltf-model="#mainSculpture1">
            </a-entity>
            <a-entity id="dashboard-content" position="0 0 0">
              <a-entity
                id="configA0"
                scale="12 12 12"
                gltf-model="#configA-item0"
                cubemap-static
                dashboard-item="rot: -90; y : 5"
                >
                <a-box depth="0.1" height="0.1" width="0.1"  material="opacity: 0.2"></a-box>
              </a-entity>
              <a-entity
                id="configA1"
                scale="12 12 12"
                gltf-model="#configA-item1"
                dashboard-item="rot: -180; y : 5"
                >
                <a-box depth="0.1" height="0.1" width="0.1"  material="opacity: 0"></a-box>
              </a-entity>
              <a-entity
                id="configA2"
                scale="8 8 8"
                gltf-model="#configA-item2"
                dashboard-item="rot: 0;"
                >
                <a-box position="0 0.1 0" depth="0.3" height="0.3" width="0.5"  material="opacity: 0"></a-box>
              </a-entity>
              <a-entity
                id="configA3"
                scale="8 8 8"
                gltf-model="#configA-item3"
                dashboard-item="rot: -150;"
                >
                <a-box position="0 0.1 0" depth="0.3" height="0.6" width="0.6"  material="opacity: 0"></a-box>
              </a-entity>
              <a-entity
                id="configA4"
                scale="8 8 8"
                gltf-model="#configA-item4"
                dashboard-item="rot: -120;"
                >
                <a-box position="0 0.1 0" depth="0.3" height="0.6" width="0.3"  material="opacity: 0"></a-box>
              </a-entity>
              <a-entity
                id="configA5"
                scale="12 12 12"
                gltf-model="#configA-item5"
                dashboard-item="rot: -60;"
                >
                <a-box position="0 0 0" depth="0.2" height="0.2" width="0.2"  material="opacity: 0"></a-box>
              </a-entity>
          </a-entity>
          <a-sky src="#tahoe" rotation="0 90 0"></a-sky>
          </a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
    <div id="overlay">
      <div id="intro-place-door">
        <div id="intro-text">Place the portal door in your space.</div>
        <br>
        <div id="intro-cta">PLACE DOOR</div>
      </div>
    </div>
    <script src="video-feed.js"></script>
  </body>
</html>
